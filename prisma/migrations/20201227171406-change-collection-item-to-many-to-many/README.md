# Migration `20201227171406-change-collection-item-to-many-to-many`

This migration has been generated by reisyun at 12/28/2020, 2:14:08 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "collection_item" DROP CONSTRAINT "collection_item_pkey",
ADD PRIMARY KEY ("collectionId", "mediaId")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201227162652-change-collection-item-pk..20201227171406-change-collection-item-to-many-to-many
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -154,10 +154,11 @@
   collection   Collection @relation(fields: [collectionId], references: [id])
   collectionId String
   media        Media      @relation(fields: [mediaId], references: [id])
-  mediaId      String     @id
+  mediaId      String
+  @@id([collectionId, mediaId])
   @@map(name: "collection_item")
 }
 // Media
```


