# Migration `20210212132514-fix-history-attr`

This migration has been generated by reisyun at 2/12/2021, 10:25:16 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "history" DROP CONSTRAINT "history_pkey",
ALTER COLUMN "repeat" SET NOT NULL,
ALTER COLUMN "secret" SET NOT NULL,
ALTER COLUMN "completedAt" SET NOT NULL,
ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "id" SET DATA TYPE TEXT,
ADD PRIMARY KEY ("id");
DROP SEQUENCE "history_id_seq"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210211142441-add-history-id..20210212132514-fix-history-attr
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -60,13 +60,13 @@
   PLANNING
 }
 model History {
-  id          Int           @id @default(autoincrement())
+  id          String        @id @default(uuid())
   status      HistoryStatus
-  repeat      Int?          @default(0)
-  secret      Boolean?      @default(false)
-  completedAt DateTime?     @default(now())
+  repeat      Int           @default(0)
+  secret      Boolean       @default(false)
+  completedAt DateTime      @default(now())
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
```


