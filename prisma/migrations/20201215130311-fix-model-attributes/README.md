# Migration `20201215130311-fix-model-attributes`

This migration has been generated by reisyun at 12/15/2020, 10:03:19 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "collection_item.mediaId_unique"

ALTER TABLE "collection" ALTER COLUMN "updatedAt" DROP DEFAULT

ALTER TABLE "collection_item" ALTER COLUMN "updatedAt" DROP DEFAULT

ALTER TABLE "media" ALTER COLUMN "updatedAt" DROP DEFAULT

ALTER TABLE "review" ALTER COLUMN "updatedAt" DROP DEFAULT

ALTER TABLE "user" ALTER COLUMN "updatedAt" DROP DEFAULT
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201202153730-initialize..20201215130311-fix-model-attributes
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -19,9 +19,9 @@
   password  String
   verified  Boolean  @default(false)
   role      UserRole @default(USER)
   createdAt DateTime @default(now())
-  updatedAt DateTime @default(now()) @updatedAt
+  updatedAt DateTime @updatedAt
   profile     Profile      @relation(fields: [profileId], references: [id])
   profileId   Int
@@ -76,9 +76,9 @@
   spoiler   Boolean  @default(true)
   private   Boolean  @default(false)
   likeCount Int      @default(0)
   createdAt DateTime @default(now())
-  updatedAt DateTime @default(now()) @updatedAt
+  updatedAt DateTime @updatedAt
   user    User   @relation(fields: [userId], references: [id])
   userId  String
   media   Media  @relation(fields: [mediaId], references: [id])
@@ -99,9 +99,9 @@
   name        String
   description String?
   category    CollectionCategory @default(CUSTOM)
   createdAt   DateTime           @default(now())
-  updatedAt   DateTime           @default(now()) @updatedAt
+  updatedAt   DateTime           @updatedAt
   removedAt   DateTime?
   collector          User?            @relation(fields: [collectorId], references: [id])
   collectorId        String?
@@ -118,14 +118,14 @@
   private     Boolean  @default(false)
   repeat      Int      @default(0)
   completedAt DateTime @default(now())
   createdAt   DateTime @default(now())
-  updatedAt   DateTime @default(now()) @updatedAt
+  updatedAt   DateTime @updatedAt
   collection   Collection @relation(fields: [collectionId], references: [id])
   collectionId String
   media        Media      @relation(fields: [mediaId], references: [id])
-  mediaId      Int        @unique
+  mediaId      Int
   @@map(name: "collection_item")
 }
@@ -158,9 +158,9 @@
   startDate    DateTime?
   endDate      DateTime?
   episodeCount Int?
   createdAt    DateTime     @default(now())
-  updatedAt    DateTime     @default(now()) @updatedAt
+  updatedAt    DateTime     @updatedAt
   removedAt    DateTime?
   genres          Genre[]          @relation(references: [id])
   reviews         Review[]
```


